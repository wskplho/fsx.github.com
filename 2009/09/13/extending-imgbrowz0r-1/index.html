<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Extending ImgBrowz0r — Blog — 61924.nl</title>
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<!-- <link rel="stylesheet/less" type="text/css" href="http://0.0.0.0:8080/assetsscreen.less"> -->
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="http://0.0.0.0:8080/assets/all.css">
<link rel="alternate" type="application/atom+xml" href="http://0.0.0.0:8080/atom.xml" />
</head>
<body id="blog-section">
<nav id="navigation">
<h1>61924</h1>
<div>

<a id="nav-blog" href="http://0.0.0.0:8080/">blog</a>

<a id="nav-archive" href="http://0.0.0.0:8080/archive/">archive</a>

<a id="nav-projects" href="http://0.0.0.0:8080/projects/">projects</a>

<a id="nav-about" href="http://0.0.0.0:8080/about/">about</a>

</div>
</nav>
<section id="content">

<article class="post">
<header>
<h1>Extending ImgBrowz0r</h1>
<h2>13 Sep 2009</h2>
</header>
<p>Adding titles and descriptions for images and directories. This might be useful
for people who use ImgBrowz0r for their portfolio and not for an image dump.</p>

<p>A user <del>on the forum (Pat)</del> already
made a similar mod, which uses an XML file. I&#39;m going to use a normal PHP array
to store all the information, which is faster and you can easily attach a
database on it.</p>

<p><strong>Note:</strong> This article/guide has been made with ImgBrowz0r 0.3.4. I can&#39;t
guarantee it works with older version of ImgBrowz0r.</p>

<h2>Installation</h2>

<p>Below you can find a step-by-step guide on how to install this mod. And below
that you can find some usage examples and screenshots.</p>

<hr>

<p>Change the following part of your CSS from:</p>
<pre class="highlight"><code><span class="nf">#imgbrowz0r</span> <span class="nc">.img-directory</span> <span class="nt">span</span><span class="nc">.img-dir-name</span><span class="o">,</span>
<span class="nf">#imgbrowz0r</span> <span class="nc">.img-directory</span> <span class="nt">span</span><span class="nc">.img-thumb-date</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">block</span> <span class="p">}</span>
<span class="nf">#imgbrowz0r</span> <span class="nc">.img-directory</span> <span class="nt">span</span><span class="nc">.img-dir-name</span> <span class="p">{</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span><span class="k">font-size</span><span class="o">:</span> <span class="m">1.2em</span> <span class="p">}</span>

<span class="nf">#imgbrowz0r</span> <span class="nc">.img-column-1</span> <span class="p">{</span> <span class="k">clear</span><span class="o">:</span> <span class="k">left</span> <span class="p">}</span>

<span class="nf">#imgbrowz0r</span> <span class="nc">.img-thumbnail</span><span class="o">,</span>
<span class="nf">#imgbrowz0r</span> <span class="nc">.img-directory</span> <span class="p">{</span> <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span><span class="k">padding</span><span class="o">:</span> <span class="m">1.5em</span> <span class="m">0</span><span class="p">;</span><span class="k">width</span><span class="o">:</span> <span class="m">25</span><span class="o">%</span><span class="p">;</span><span class="k">text-align</span><span class="o">:</span> <span class="k">center</span> <span class="p">}</span>
</code></pre>
<p>To:</p>
<pre class="highlight"><code><span class="nf">#imgbrowz0r</span> <span class="nt">span</span><span class="nc">.img-dir-name</span><span class="o">,</span> <span class="nf">#imgbrowz0r</span> <span class="nt">span</span><span class="nc">.img-name</span><span class="o">,</span>
<span class="nf">#imgbrowz0r</span> <span class="nt">span</span><span class="nc">.img-thumb-desc</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">block</span> <span class="p">}</span>
<span class="nf">#imgbrowz0r</span> <span class="nt">span</span><span class="nc">.img-dir-name</span><span class="o">,</span>
<span class="nf">#imgbrowz0r</span> <span class="nt">span</span><span class="nc">.img-name</span> <span class="p">{</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span><span class="k">font-size</span><span class="o">:</span> <span class="m">1.2em</span><span class="p">;</span><span class="n">word</span><span class="o">-</span><span class="n">wrap</span><span class="o">:</span> <span class="n">break</span><span class="o">-</span><span class="n">word</span> <span class="p">}</span>

<span class="nf">#imgbrowz0r</span> <span class="nc">.img-thumbnail</span><span class="o">,</span>
<span class="nf">#imgbrowz0r</span> <span class="nc">.img-directory</span> <span class="p">{</span> <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span><span class="k">margin-left</span><span class="o">:</span> <span class="m">2</span><span class="o">.</span><span class="m">6</span><span class="o">%</span><span class="p">;</span><span class="k">padding</span><span class="o">:</span> <span class="m">1.5em</span> <span class="m">0</span><span class="p">;</span><span class="k">width</span><span class="o">:</span> <span class="m">23</span><span class="o">%</span><span class="p">;</span><span class="k">text-align</span><span class="o">:</span> <span class="k">center</span> <span class="p">}</span>

<span class="nf">#imgbrowz0r</span> <span class="nc">.img-column-1</span> <span class="p">{</span> <span class="k">clear</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span><span class="k">margin-left</span><span class="o">:</span> <span class="m">0</span> <span class="p">}</span>
</code></pre>
<p>This will create some space between the thumbnails.</p>

<hr>

<p>Open imgbrowz0r.php and replace the following code at line 37:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">protected</span> <span class="nv">$config</span><span class="p">,</span> <span class="nv">$cur_directory</span><span class="p">,</span> <span class="nv">$cur_page</span><span class="p">,</span> <span class="nv">$files</span><span class="p">,</span> <span class="nv">$page_count</span><span class="p">,</span>
</code></pre>
<p>With:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">protected</span> <span class="nv">$config</span><span class="p">,</span> <span class="nv">$cur_directory</span><span class="p">,</span> <span class="nv">$cur_page</span><span class="p">,</span> <span class="nv">$files</span><span class="p">,</span> <span class="nv">$page_count</span><span class="p">,</span> <span class="nv">$info</span><span class="o">=</span><span class="k">array</span><span class="p">(),</span>
</code></pre>
<hr>

<p>Replace the following code on line 180:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
</code></pre>
<p>With:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="nv">$info</span><span class="o">=</span><span class="k">array</span><span class="p">())</span>
</code></pre>
<p>The <code>init()</code> function now accepts an optional parameter. We will use this to
pass the titles/descriptions of all the directories/images to ImgBrowz0r.</p>

<hr>

<p>Add the following code on line 173:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span> <span class="o">=</span> <span class="nv">$info</span><span class="p">;</span>
</code></pre>
<p>After:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">count_files</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">files</span><span class="p">);</span>
</code></pre>
<hr>

<p>Replace the following code that starts at line ~197 and ends at line ~235:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$image_cache_dir</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">);</span>
    <span class="nv">$image_thumbnail</span> <span class="o">=</span> <span class="nv">$image_cache_dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// The name of the thumbnail</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_cache_dir</span><span class="p">))</span>
        <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_cache_dir</span><span class="p">,</span> <span class="mo">0777</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_thumbnail</span><span class="p">))</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">make_thumb</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nv">$image_thumbnail</span><span class="p">);</span>

    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-thumbnail img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;images_url&#39;</span><span class="p">],</span>
         <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&quot; style=&quot;background-image: url(\&#39;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$image_thumbnail</span><span class="p">,</span> <span class="s1">&#39;\&#39;)&quot; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
         <span class="s1">&#39;&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;span&gt;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">format_time</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
         <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;dir_thumbs&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$dir_hash</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
        <span class="nv">$dir_thumbs</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">read_cache</span><span class="p">(</span><span class="nv">$dir_hash</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>

        <span class="nv">$dir_thumbnail</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$dir_thumbs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="s1">&#39; style=&quot;background-image: url(\&#39;&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_url&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span>
                         <span class="nv">$dir_hash</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$dir_thumbs</span><span class="p">[(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;random_thumbs&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="k">false</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$dir_thumbs</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))]</span><span class="o">.</span><span class="s1">&#39;\&#39;)&quot;&#39;</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>

        <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-directory img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span>
             <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">]),</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
             <span class="nv">$dir_thumbnail</span><span class="p">,</span> <span class="s1">&#39; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;span class=&quot;img-dir-name&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
             <span class="s1">&#39;&lt;/span&gt;&lt;span class=&quot;img-thumb-date&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">format_time</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-directory img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span>
             <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">]),</span>
             <span class="s1">&#39;&quot; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&quot;&gt;&lt;span&gt;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">format_time</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
             <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>With:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$key</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span>
<span class="p">{</span>
    <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;desc&#39;</span><span class="p">]))</span>
        <span class="nv">$desc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;desc&#39;</span><span class="p">];</span>
    <span class="k">else</span>
        <span class="nv">$desc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">format_time</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nv">$desc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">format_time</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$image_cache_dir</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">);</span>
    <span class="nv">$image_thumbnail</span> <span class="o">=</span> <span class="nv">$image_cache_dir</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// The name of the thumbnail</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_cache_dir</span><span class="p">))</span>
        <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_cache_dir</span><span class="p">,</span> <span class="mo">0777</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$image_thumbnail</span><span class="p">))</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">make_thumb</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nv">$image_thumbnail</span><span class="p">);</span>

    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-thumbnail img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;images_url&#39;</span><span class="p">],</span>
         <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&quot; style=&quot;background-image: url(\&#39;&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$image_thumbnail</span><span class="p">,</span> <span class="s1">&#39;\&#39;)&quot; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
         <span class="s1">&#39;&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;span class=&quot;img-name&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;&lt;/span&gt;&lt;span class=&quot;img-thumb-desc&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$desc</span><span class="p">,</span> <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;dir_thumbs&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$dir_hash</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
        <span class="nv">$dir_thumbs</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">read_cache</span><span class="p">(</span><span class="nv">$dir_hash</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>

        <span class="nv">$dir_thumbnail</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$dir_thumbs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="s1">&#39; style=&quot;background-image: url(\&#39;&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;cache_url&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span>
                         <span class="nv">$dir_hash</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$dir_thumbs</span><span class="p">[(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;random_thumbs&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="k">false</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$dir_thumbs</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))]</span><span class="o">.</span><span class="s1">&#39;\&#39;)&quot;&#39;</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>

        <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-directory img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span>
             <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">]),</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
             <span class="nv">$dir_thumbnail</span><span class="p">,</span> <span class="s1">&#39; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;span class=&quot;img-dir-name&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span>
             <span class="s1">&#39;&lt;/span&gt;&lt;span class=&quot;img-thumb-desc&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$desc</span><span class="p">,</span> <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&lt;div class=&quot;img-directory img-column-&#39;</span><span class="p">,</span> <span class="nv">$row_count</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;a href=&quot;&#39;</span><span class="p">,</span>
             <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="o">.</span><span class="nv">$file</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">]),</span>
             <span class="s1">&#39;&quot; title=&quot;&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;&quot;&gt;&lt;span&gt;&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;img-thumb-desc&quot;&gt;&#39;</span><span class="p">,</span> <span class="nv">$desc</span><span class="p">,</span>
             <span class="s1">&#39;&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>This adds the code that checks if the image or directory has a title or
description. It also changes some CSS classes and adds a title to the image
thumbnails.</p>

<hr>

<p>Replace the following code at line 288:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$path_parts</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$part</span><span class="p">)</span>
        <span class="nv">$output</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nb">array_slice</span><span class="p">(</span><span class="nv">$path_parts</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="nv">$k</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span> <span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">.</span><span class="nv">$part</span><span class="o">.</span><span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>

<span class="k">return</span> <span class="s1">&#39;&lt;div class=&quot;img-breadcrumbs&quot;&gt;&lt;span&gt;Breadcrumbs: &lt;/span&gt;&lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="s1">&#39;0/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&quot;&gt;Root&lt;/a&gt;&#39;</span><span class="o">.</span>
       <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$output</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39; / &#39;</span><span class="o">.</span><span class="nb">implode</span><span class="p">(</span><span class="s1">&#39; / &#39;</span><span class="p">,</span> <span class="nv">$output</span><span class="p">)</span> <span class="o">:</span> <span class="k">null</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
</code></pre>
<p>With:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$path_parts</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$part</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nb">array_slice</span><span class="p">(</span><span class="nv">$path_parts</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="nv">$k</span><span class="o">+</span><span class="mi">1</span><span class="p">)));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span>
            <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
        <span class="k">else</span>
            <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$part</span><span class="p">;</span>

        <span class="nv">$output</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="nv">$key</span><span class="o">.</span><span class="s1">&#39;/1&#39;</span> <span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">.</span><span class="nv">$title</span><span class="o">.</span><span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">return</span> <span class="s1">&#39;&lt;div class=&quot;img-breadcrumbs&quot;&gt;&lt;span&gt;Breadcrumbs: &lt;/span&gt;&lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;%PATH%&#39;</span><span class="p">,</span>  <span class="s1">&#39;0/1&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">&#39;main_url&#39;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">.</span>
       <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;Root&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="o">.</span>
       <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$output</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39; / &#39;</span><span class="o">.</span><span class="nb">implode</span><span class="p">(</span><span class="s1">&#39; / &#39;</span><span class="p">,</span> <span class="nv">$output</span><span class="p">)</span> <span class="o">:</span> <span class="k">null</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
</code></pre>
<p>This code shows the correct title in the breadcrumbs.</p>

<hr>

<p>Replace the following code on line 335:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// Display description of the current directory</span>
<span class="c1">// Html tags are stripped from the description except the following tags:</span>
<span class="c1">// &lt;p&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;a&gt;, &lt;br /&gt;, &lt;h1&gt;, &lt;h2&gt; and &lt;h3&gt;</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">description</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">full_path</span><span class="o">.</span><span class="s1">&#39;.desc&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;div class=&quot;img-description&quot;&gt;&#39;</span><span class="o">.</span>
        <span class="nb">strip_tags</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">full_path</span><span class="o">.</span><span class="s1">&#39;.desc&#39;</span><span class="p">),</span> <span class="s1">&#39;&lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;a&gt;&lt;br&gt;&lt;h1&gt;&lt;h2&gt;&lt;h3&gt;&#39;</span><span class="p">)</span><span class="o">.</span>
        <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>With:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// Returns a description of the current directory</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">description</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$key</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$key</span><span class="p">))</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span>
        <span class="nv">$desc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;desc&#39;</span><span class="p">];</span>
    <span class="k">else</span>
        <span class="nv">$desc</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$desc</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>We replace the orginal description function with a new one that uses our $info
variable to show a description. So there&#39;s no need for those <code>.desc</code> files
anymore.</p>

<hr>

<p>Add the following code after the description function you just replaced:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// Returns the current category name</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">current_category</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$key</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cur_directory</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$key</span><span class="p">))</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span>
        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
    <span class="k">else</span>
        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$key</span> <span class="o">!=</span> <span class="s1">&#39;/&#39;</span> <span class="o">?</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;Root&#39;</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>And you&#39;re done.</p>

<h2>Usage examples and screenshots</h2>

<p>To make use of the new feature you just installed you just have to make a variable
that contains an array with the right information and add it to <code>$gallery-&gt;init()</code>
as an argument. Like this:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="p">[</span> <span class="o">...</span> <span class="nx">code</span> <span class="o">...</span> <span class="p">]</span>

<span class="nv">$info</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

    <span class="c1">// A slash represents the root</span>
    <span class="s1">&#39;/&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This is a gallery with various images.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;BigTest&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Big image test&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Some big images that are used to test if ImgBrowz0r can resize big images properly.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;Test2&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Test 2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This directory has no images.&#39;</span><span class="p">)</span>
    <span class="p">);</span>

<span class="nv">$gallery</span><span class="o">-&gt;</span><span class="na">init</span><span class="p">(</span><span class="nv">$info</span><span class="p">);</span>

<span class="p">[</span> <span class="o">...</span> <span class="nx">code</span> <span class="o">...</span> <span class="p">]</span>

<span class="c1">// This is used to display the title and/or description of the current directory</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;h1&gt;&#39;</span><span class="p">,</span> <span class="nv">$gallery</span><span class="o">-&gt;</span><span class="na">current_category</span><span class="p">(),</span> <span class="s1">&#39;&lt;/h1&gt;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;p&gt;&#39;</span><span class="p">,</span> <span class="nv">$gallery</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">(),</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span><span class="p">;</span>

<span class="p">[</span> <span class="o">...</span> <span class="nx">code</span> <span class="o">...</span> <span class="p">]</span>
</code></pre>
<p>And the result will be something like this.</p>

<p><a href="https://dl.dropbox.com/u/18064043/61924.nl/img/extending_imgbrowz0r_01.png" title="jsimgbox"><img src="https://dl.dropbox.com/u/18064043/61924.nl/img/tn_extending_imgbrowz0r_01.png" alt="Extending ImgBrowz0r 1"></a>
<em>(Click for larger image)</em></p>

<p>You can use <code>$gallery-&gt;current_category()</code> and <code>$gallery-&gt;description()</code> to
display the title and/or description of the current directory.</p>

<p>Here&#39;s another example:</p>
<pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$info</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

    <span class="s1">&#39;Characters&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Characters&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A list of characters from various animes.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;Characters/72552.jpg&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Guts&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Guts (ガッツ, Gattsu) is a fictional character of the anime and manga franchise Berserk by mangaka Kentaro Miura. He is the main protagonist of the story.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;Characters/194495.jpg&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Porco&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;An Italian World War I fighter ace, now living as a freelance bounty hunter chasing &quot;air pirates&quot; in the Adriatic Sea. The man has been cursed, and has been transformed into a pig.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;Characters/177250.jpg&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Ippo Makunouchi&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Ippo is a classic in-fighter and is well known for his Peek-a-Boo style of boxing and hard punches including three signature punches: a rib-cracking Liver blow, Gazelle punch (an uppercut variant), and the Dempsey roll technique.&#39;</span><span class="p">),</span>

    <span class="s1">&#39;Characters/174552.jpg&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Yoko Littner&#39;</span><span class="p">,</span>
        <span class="s1">&#39;desc&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Yoko is a girl from Jeeha\&#39;s neighboring village Ritona, who had been chasing the Gunmen which entered Jeeha village. She wields an extensive range of firearms which include a long range sniper rifle.&#39;</span><span class="p">),</span>

    <span class="p">[</span> <span class="o">...</span> <span class="nx">code</span> <span class="o">...</span> <span class="p">]</span>

    <span class="p">);</span>
</code></pre>
<p>And the output is something like this:</p>

<p><a href="https://dl.dropbox.com/u/18064043/61924.nl/img/extending_imgbrowz0r_02.png" title="jsimgbox"><img src="https://dl.dropbox.com/u/18064043/61924.nl/img/tn_extending_imgbrowz0r_02.png" alt="Extending ImgBrowz0r 2"></a>
<em>(Click for larger image)</em></p>

<p>The same thing can be done for all directories and images at all levels of
nesting. It&#39;s really easy. :)</p>

<footer>
<ul class="tags">
<li><a href="http://0.0.0.0:8080/tags/imgbrowz0r/">imgbrowz0r</a></li><li><a href="http://0.0.0.0:8080/tags/php/">php</a></li>
</ul>
</footer>
</article>

</section>
<footer id="bottom">
<p>&copy; 2011-2012. <a href="https://github.com/FSX">Frank Smit</a>.</p>
</footer>
<script type="text/javascript" src="http://0.0.0.0:8080/assets/js/ender.min.js"></script>
<script type="text/javascript" src="http://0.0.0.0:8080/assets/js/jsimgbox2.min.js"></script>
<script type="text/javascript">
$.domReady(function () {
Jsimgbox.init($('a[title=jsimgbox]'));
});
</script>
</body>
</html>
