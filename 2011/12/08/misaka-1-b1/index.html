<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Misaka 1.0.0 Beta 1 — Blog — 61924.nl</title>
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<!-- <link rel="stylesheet/less" type="text/css" href="http://61924.nl/assetsscreen.less"> -->
<link rel="stylesheet" type="text/css" href="http://61924.nl/assets/all.css">
<link rel="alternate" type="application/atom+xml" href="http://61924.nl/atom.xml" />
</head>
<body id="blog-section">
<nav id="navigation">
<h1>61924</h1>
<div>

<a id="nav-blog" href="http://61924.nl/">blog</a>

<a id="nav-archive" href="http://61924.nl/archive/">archive</a>

<a id="nav-projects" href="http://61924.nl/projects/">projects</a>

<a id="nav-about" href="http://61924.nl/about/">about</a>

</div>
</nav>
<section id="content">

<article class="post">
<header>
<h1>Misaka 1.0.0 Beta 1</h1>
<h2>08 Dec 2011</h2>
</header>
<p>It&#39;s been a while. Like a few months. And I&#39;ve been working on duplicating
<a href="https://github.com/tanoku/redcarpet">Redcarpet&#39;s</a> functionality. I think everything should work now, but I still
need to test everything properly and that&#39;s why I&#39;m releasing a beta. And the
API documentation is also lacking, but the the code itself is understandable
enough.</p>

<p>My understanding of C is still limited, but thanks to Redcarpet&#39;s source code
I figured out how to implement everything. Not everything is in C. The largest
part is actually done in Cython. Which is a great tool. I&#39;ve also included the
C code that&#39;s generated by Cython, so you don&#39;t have to install Cython to
compile Misaka. Only when you want to regenerate the C code (in that case you
use <code>setup_cython.py</code>).</p>

<p>Besides the big API change, Misaka now also accepts Unicode strings, but the
side effect is that it&#39;s faster in Python 3. And Python 2 is a lot slower in the
benchmark, but you won&#39;t really notice it (if you&#39;re not parsing a large
document 10,000 times).</p>

<p>Here&#39;s a small example (the old API is also available).</p>
<pre class="highlight"><code><span class="kn">from</span> <span class="nn">misaka</span> <span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">HtmlRenderer</span><span class="p">,</span> <span class="n">SmartyPants</span>

<span class="k">class</span> <span class="nc">BleepRenderer</span><span class="p">(</span><span class="n">HtmlRenderer</span><span class="p">,</span> <span class="n">SmartyPants</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">md</span> <span class="o">=</span> <span class="n">Markdown</span><span class="p">(</span><span class="n">BleepRenderer</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;Some &quot;stuff&quot; here&#39;</span><span class="p">))</span>
<span class="c"># &lt;p&gt;Some &amp;ldquo;stuff&amp;rdquo; here&lt;/p&gt;</span>
</code></pre>
<p>The classes are located in <a href="https://github.com/FSX/misaka/blob/master/src/misaka.pyx">misaka.pyx</a> and all the callbacks you can
implement in your own renderer are listed in <a href="https://github.com/FSX/misaka/blob/master/src/misaka.pyx">wrapper.c</a>. That&#39;s quite
unfriendly documentation at the moment, but I&#39;m planning to change that.</p>

<p>For now just fetch the code from the <a href="https://github.com/FSX/misaka">Github repository</a>. If something is not
working, please <a href="https://github.com/FSX/misaka/issues">report it</a>.</p>

<p>Have fun.</p>

<footer>
<ul class="tags">
<li><a href="http://61924.nl/tags/python/">python</a></li><li><a href="http://61924.nl/tags/markdown/">markdown</a></li><li><a href="http://61924.nl/tags/sundown/">sundown</a></li><li><a href="http://61924.nl/tags/misaka/">misaka</a></li>
</ul>
</footer>
</article>

</section>
<footer id="bottom">
<p>&copy; 2011-2012. <a href="https://github.com/FSX">Frank Smit</a>.</p>
</footer>
<script type="text/javascript" src="http://61924.nl/assets/js/ender.min.js"></script>
<script type="text/javascript" src="http://61924.nl/assets/js/jsimgbox2.min.js"></script>
<script type="text/javascript">
$.domReady(function () {
Jsimgbox.init($('a[title=jsimgbox]'));
});
</script>
</body>
</html>
